import{b as ce,k as W,l as K,N as ie,O as he,Q as te,R as ve,d as z,S as ke,a as C,u as ye,c as ue,U as ge,D,V as de,W as Te,q as c,s as I,X as O,H as l,Y as Ee,z as b,x as R,r as J,Z as fe,$ as be,a0 as Q,a1 as xe,a2 as ne,a3 as Ae,a4 as oe,a5 as Se,a6 as Ce,j as P,v as H,p as Le,a7 as Re,a8 as we,y as x,a9 as Be,t as v,F as X,A as Y,_ as _e,B as Pe,aa as Ie,G as V,f as E,ab as $e,L as G,I as Ne,E as He,J as le,K as De}from"./index-d8fefbf4.js";import{T as Oe,_ as re,P as je,b as Ve,a as qe,c as ze,E as Me}from"./ProfileBlock-70a38dfe.js";const ae=o=>{let t=0,a=o;for(;a;)t+=a.offsetTop,a=a.offsetParent;return t},se=(o,t)=>Math.abs(ae(o)-ae(t)),Fe=ce({container:{type:W([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:W(String),default:"default"},direction:{type:W(String),default:"vertical"},selectScrollTop:Boolean}),Ue={change:o=>K(o),click:(o,t)=>o instanceof MouseEvent&&(K(t)||ie(t))},pe=Symbol("anchor"),q=o=>{if(!he||o==="")return null;if(K(o))try{return document.querySelector(o)}catch{return null}return o};function We(o){let t=0;const a=(...n)=>{t&&te(t),t=ve(()=>{o(...n),t=0})};return a.cancel=()=>{te(t),t=0},a}const Ge=z({name:"ElAnchor"}),Ke=z({...Ge,props:Fe,emits:Ue,setup(o,{expose:t,emit:a}){const n=o,m=ke(),u=C(""),d=C({}),h=C(null),k=C(null),f=C(),L={};let r=!1,w=0;const B=ye("anchor"),M=ue(()=>[B.b(),n.type==="underline"?B.m("underline"):"",B.m(n.direction)]),$=e=>{L[e.href]=e.el},T=e=>{delete L[e]},g=e=>{u.value!==e&&(u.value=e,a(xe,e))};let s=null;const y=e=>{if(!f.value)return;const i=q(e);if(!i)return;s&&s(),r=!0;const _=ne(i,f.value),p=se(i,_),S=_.scrollHeight-_.clientHeight,U=Math.min(p-n.offset,S);s=Ae(f.value,w,U,n.duration,()=>{setTimeout(()=>{r=!1},20)})},A=e=>{e&&(g(e),y(e))},j=(e,i)=>{a("click",e,i),A(i)},N=We(()=>{f.value&&(w=oe(f.value));const e=F();r||ie(e)||g(e)}),F=()=>{if(!f.value)return;const e=oe(f.value),i=[];for(const _ of Object.keys(L)){const p=q(_);if(!p)continue;const S=ne(p,f.value),U=se(p,S);i.push({top:U-n.offset-n.bound,href:_})}i.sort((_,p)=>_.top-p.top);for(let _=0;_<i.length;_++){const p=i[_],S=i[_+1];if(_===0&&e===0)return n.selectScrollTop?p.href:"";if(p.top<=e&&(!S||S.top>e))return p.href}},Z=()=>{const e=q(n.container);!e||be(e)?f.value=window:f.value=e};ge(f,"scroll",N);const ee=()=>{Q(()=>{if(!h.value||!k.value||!u.value){d.value={};return}const e=L[u.value];if(!e){d.value={};return}const i=h.value.getBoundingClientRect(),_=k.value.getBoundingClientRect(),p=e.getBoundingClientRect();if(n.direction==="horizontal"){const S=p.left-i.left;d.value={left:`${S}px`,width:`${p.width}px`,opacity:1}}else{const S=p.top-i.top+(p.height-_.height)/2;d.value={top:`${S}px`,opacity:1}}})};return D(u,ee),D(()=>{var e;return(e=m.default)==null?void 0:e.call(m)},ee),de(()=>{Z();const e=decodeURIComponent(window.location.hash);q(e)?A(e):N()}),D(()=>n.container,()=>{Z()}),Te(pe,{ns:B,direction:n.direction,currentAnchor:u,addLink:$,removeLink:T,handleClick:j}),t({scrollTo:A}),(e,i)=>(c(),I("div",{ref_key:"anchorRef",ref:h,class:O(l(M))},[e.marker?(c(),I("div",{key:0,ref_key:"markerRef",ref:k,class:O(l(B).e("marker")),style:Ee(d.value)},null,6)):b("v-if",!0),R("div",{class:O(l(B).e("list"))},[J(e.$slots,"default")],2)],2))}});var Je=fe(Ke,[["__file","anchor.vue"]]);const Qe=ce({title:String,href:String}),Xe=z({name:"ElAnchorLink"}),Ye=z({...Xe,props:Qe,setup(o){const t=o,a=C(null),{ns:n,direction:m,currentAnchor:u,addLink:d,removeLink:h,handleClick:k}=Se(pe),f=ue(()=>[n.e("link"),n.is("active",u.value===t.href)]),L=r=>{k(r,t.href)};return D(()=>t.href,(r,w)=>{Q(()=>{w&&h(w),r&&d({href:r,el:a.value})})}),de(()=>{const{href:r}=t;r&&d({href:r,el:a.value})}),Ce(()=>{const{href:r}=t;r&&h(r)}),(r,w)=>(c(),I("div",{class:O(l(n).e("item"))},[R("a",{ref_key:"linkRef",ref:a,class:O(l(f)),href:r.href,onClick:L},[J(r.$slots,"default",{},()=>[P(H(r.title),1)])],10,["href"]),r.$slots["sub-link"]&&l(m)==="vertical"?(c(),I("div",{key:0,class:O(l(n).e("list"))},[J(r.$slots,"sub-link")],2)):b("v-if",!0)],2))}});var me=fe(Ye,[["__file","anchor-link.vue"]]);const Ze=Le(Je,{AnchorLink:me}),et=Re(me);const tt={__name:"TreeLinkBase",props:["node"],setup(o){const t=o;function a(n){n.stopPropagation();let m=document.getElementById(n.currentTarget.dataset.id);m&&m.scrollIntoView({behavior:"smooth",block:"start"})}return(n,m)=>{const u=we("TreeLinkBase",!0),d=et;return t.node?(c(),x(d,{key:0,"data-id":t.node.id,onClick:a},Be({default:v(()=>[P(H(o.node.text)+" ",1)]),_:2},[t.node.children.length>0?{name:"sub-link",fn:v(()=>[(c(!0),I(X,null,Y(t.node.children,h=>(c(),x(u,{node:h},null,8,["node"]))),256))]),key:"0"}:void 0]),1032,["data-id"])):b("",!0)}}};const nt={__name:"TreeAnchor",props:["root"],setup(o){return(t,a)=>{const n=Ze;return o.root?(c(),x(n,{key:0},{default:v(()=>[(c(!0),I(X,null,Y(o.root.children,m=>(c(),x(tt,{node:m},null,8,["node"]))),256))]),_:1})):b("",!0)}}},ot=_e(nt,[["__scopeId","data-v-01e27635"]]);const lt={class:"content"},rt={key:0,class:"front"},at={style:{display:"flex"}},st={class:"foot"},ct={__name:"Page",setup(o){const t=Pe();let a=C(),n=C(),m=-1,u=null,d=null,h=Ie(null),k=C(null),f=C(null);function L(){let $=t.query.name,T=t.query.from;re(Object.assign({"../data/config.json":()=>V(()=>import("./index-d8fefbf4.js").then(g=>g.ax),["assets/index-d8fefbf4.js","assets/index-4b2659f8.css"]),"../data/daily.json":()=>V(()=>import("./daily-12711155.js"),[]),"../data/rmzplugins.json":()=>V(()=>import("./rmzplugins-929aae2c.js"),[])}),`../data/${T}.json`).then(g=>{let s=g.default;m=s.findIndex(y=>y.name==$),u=s[m-1],s[m],d=s[m+1],re(Object.assign({"../articles/daily/Matrix2DRecord.md":()=>V(()=>import("./Matrix2DRecord-7a1f0911.js"),["assets/Matrix2DRecord-7a1f0911.js","assets/index-d8fefbf4.js","assets/index-4b2659f8.css"])}),`../articles/${T}/${$}.md`).then(y=>{h.value=y.default,k.value=y.frontmatter}).catch(y=>{h.value=null,k.value=null})})}function r(){if(!a.value||!h.value)return null;let $=a.value.querySelectorAll("h1,h2"),T={children:[]},g=[],s=T,y=0;for(let A of $){if(!A.id)continue;let j=Number(A.tagName.slice(-1)),N={text:A.innerHTML,id:A.id,children:[]};for(;y>=j;)--y,s=g.pop();s||(s=T),s.children.push(N),g.push(s),s=N,++y}return T}function w(){G.back()}function B(){G.replace({path:u.path,query:{name:u.name,from:u.from}})}function M(){G.replace({path:d.path,query:{name:d.name,from:d.from}})}return D(()=>[t.query.name,t.query.from],L),D(()=>h.value,async()=>{await Q(),f.value=r(),n.value.scrollTo({top:0,behavior:"smooth"})}),L(),($,T)=>{const g=Ne,s=Ve,y=He,A=Me,j=qe,N=ze;return c(),x(Oe,null,{middle:v(()=>[E(N,{ref_key:"scrollbar",ref:n,class:"scroll","wrap-class":"scroll-wrap","view-class":"scroll-view-page"},{default:v(()=>[R("div",lt,[R("div",null,[E(s,{type:"info",underline:"never",onClick:w},{default:v(()=>[E(g,null,{default:v(()=>[E(l(le))]),_:1}),T[0]||(T[0]=P("返回 ",-1))]),_:1})]),l(k)?(c(),I("div",rt,[E(y,{tag:"b",size:"large"},{default:v(()=>[P(H(l(k).title),1)]),_:1}),R("div",at,[l(k).date?(c(),x(y,{key:0,size:"small",style:{"margin-right":"5px"}},{default:v(()=>[P(H(l(k).date),1)]),_:1})):b("",!0),l(k).tags?(c(!0),I(X,{key:1},Y(l(k).tags,F=>(c(),x(A,{type:"info",size:"small",style:{"margin-right":"2px"}},{default:v(()=>[P(H(F),1)]),_:2},1024))),256)):b("",!0)])])):b("",!0),E(j,{style:{width:"100%",margin:"0 5px 0 5px"}}),R("div",{style:{width:"100%"},ref_key:"mdWrapper",ref:a},[l(h)?(c(),x($e(l(h)),{key:0})):b("",!0)],512)]),R("div",st,[R("div",null,[l(u)?(c(),x(s,{key:0,type:"info",underline:"never",onClick:B},{default:v(()=>[E(g,null,{default:v(()=>[E(l(le))]),_:1}),P(" "+H(l(u).frontmatter.title),1)]),_:1})):b("",!0)]),R("div",null,[l(d)?(c(),x(s,{key:0,type:"info",underline:"never",onClick:M},{default:v(()=>[P(H(l(d).frontmatter.title)+" ",1),E(g,null,{default:v(()=>[E(l(De))]),_:1})]),_:1})):b("",!0)])])]),_:1},512)]),last:v(()=>[l(f)?(c(),x(ot,{key:0,root:l(f)},null,8,["root"])):b("",!0),E(je)]),_:1})}}},dt=_e(ct,[["__scopeId","data-v-f586fe58"]]);export{dt as default};
